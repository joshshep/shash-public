<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>shash</title><style>canvas{display:block;width:100vw;height:100%;max-height:100%;overflow:hidden}body,html{overscroll-behavior:none;margin:0;height:100%;overflow:hidden;background-color:#404040}</style><link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 9 9'%3E%3Cpath d='M.5 1H3V3H1V7H3V5H5V7H7V3H5V1H7.5' stroke='%23BADA55'/%3E%3C/svg%3E"></head><body><canvas id="gpuCanvas"></canvas><script>"use strict";(()=>{var t=Object.defineProperty,e=(e,i,r)=>((e,i,r)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r)(e,"symbol"!=typeof i?i+"":i,r);function i(t,e,i){let r=t[i]-t[0],s=t[i+1]-t[1],h=t[i+2]-t[2],n=t[6]-t[0],o=t[7]-t[1],a=t[8]-t[2],l=Math.sqrt(n*n+o*o+a*a);n/=l,o/=l,a/=l;let u=Math.cos(e),c=Math.sin(e),d=r*n+s*o+h*a,f=r*u+(o*h-a*s)*c+n*d*(1-u),v=s*u+(a*r-n*h)*c+o*d*(1-u),w=h*u+(n*s-o*r)*c+a*d*(1-u);t[i]=f+t[0],t[i+1]=v+t[1],t[i+2]=w+t[2]}var r=class{constructor(t,i,r){this.f=t,this.z=i,this.tt=r,e(this,"d",0),e(this,"t",new Float64Array(12))}q(){this.t[0]=0,this.t[1]=0,this.t[2]=0,this.t[3]=1,this.t[4]=1,this.t[5]=0,this.t[6]=1,this.t[7]=0,this.t[8]=0,this.t[9]=.5,this.t[10]=.5,this.t[11]=-.5}X(t){1&this.f?(this.t[0]=t.t[6],this.t[1]=t.t[7],this.t[2]=t.t[8],this.t[6]=t.t[3],this.t[7]=t.t[4],this.t[8]=t.t[5]):(this.t[0]=t.t[3],this.t[1]=t.t[4],this.t[2]=t.t[5],this.t[6]=t.t[6],this.t[7]=t.t[7],this.t[8]=t.t[8]);let e=this.f,r=3==e||4==e||7==e||8==e||11==e?-1:1;if(this.t[9]=t.t[9],this.t[10]=t.t[10],this.t[11]=t.t[11],i(this.t,r*-this.d,9),this.t[3]=t.t[0],this.t[4]=t.t[1],this.t[5]=t.t[2],i(this.t,r*-(this.d+Math.PI/2),3),1&this.f){let t=this.t[6]-this.t[0],e=this.t[7]-this.t[1],i=this.t[8]-this.t[2];this.t[3]+=t,this.t[4]+=e,this.t[5]+=i}}},s=[[0,2,1],[0,3,2],[0,1,3],[1,2,3]],h=[[[57,142,45],[61,129,70],[58,151,124],[37,106,74]],[[224,141,36],[217,172,62],[230,111,86],[221,141,78]],[[170,57,132],[163,97,156],[142,75,109],[155,64,85]],[[69,201,145],[61,194,204],[74,165,212],[94,199,171]],[[175,186,104],[225,144,186],[225,135,128],[211,164,111]],[[180,185,46],[117,147,52],[163,136,44],[133,144,81]],[[116,97,213],[82,121,219],[109,140,206],[110,88,159]],[[205,60,39],[219,98,38],[178,72,69],[161,87,43]],[[81,109,28],[107,109,23],[86,100,43],[134,103,45]],[[87,191,65],[135,184,61],[84,195,104],[114,181,118]],[[228,53,136],[219,55,80],[213,58,110],[205,95,122]],[[180,90,204],[214,74,177],[199,147,224],[234,111,173]]];function n(t){let e=new Uint32Array(t.buffer),i=0,r=t.length/72;for(let s=0;s<r;++s){let r=h[s%h.length];for(let s=0;s<4;s++){let h=r[s],n=h[0]|h[1]<<8|h[2]<<16|255<<24;for(let r=0;r<3;++r)e[i+3]=n,t[i+4]=42,t[i+5]=42.42,i+=6}}}function o(t,e,i){let r=t.createShader(e);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){let e=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error(`Shader compile error:${e}`)}return r}var a,l=(a=Float32Array,{o:function(t,e,i){let r=new a(3);return void 0!==t&&(r[0]=t,void 0!==e&&(r[1]=e,void 0!==i&&(r[2]=i))),r},j:function(t,e,i){let r=i??new a(3);return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r},_:function(t,e,i){let r=i??new a(3),s=t[2]*e[0]-t[0]*e[2],h=t[0]*e[1]-t[1]*e[0];return r[0]=t[1]*e[2]-t[2]*e[1],r[1]=s,r[2]=h,r},g:function(t,e){let i=e??new a(3),r=t[0],s=t[1],h=t[2],n=Math.sqrt(r*r+s*s+h*h);return n>1e-5?(i[0]=r/n,i[1]=s/n,i[2]=h/n):(i[0]=0,i[1]=0,i[2]=0),i}});var u=function(t){let e=l.o(),i=l.o(),r=l.o();return{Z:function(e,i,r,s,h){let n=h??new t(16),o=Math.tan(.5*Math.PI-.5*e);if(n[0]=o/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,Number.isFinite(s)){let t=1/(r-s);n[10]=s*t,n[14]=s*r*t}else n[10]=-1,n[14]=-r;return n},o:function(e,i,r,s,h,n,o,a,l,u,c,d,f,v,w,A){let m=new t(16);return void 0!==e&&(m[0]=e,void 0!==i&&(m[1]=i,void 0!==r&&(m[2]=r,void 0!==s&&(m[3]=s,void 0!==h&&(m[4]=h,void 0!==n&&(m[5]=n,void 0!==o&&(m[6]=o,void 0!==a&&(m[7]=a,void 0!==l&&(m[8]=l,void 0!==u&&(m[9]=u,void 0!==c&&(m[10]=c,void 0!==d&&(m[11]=d,void 0!==f&&(m[12]=f,void 0!==v&&(m[13]=v,void 0!==w&&(m[14]=w,void 0!==A&&(m[15]=A)))))))))))))))),m},ot:function(e){let i=e??new t(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},st:function(e,i,r){let s=r??new t(16),h=i[0],n=i[1],o=i[2],a=e[0],l=e[1],u=e[2],c=e[3],d=e[4],f=e[5],v=e[6],w=e[7],A=e[8],m=e[9],g=e[10],M=e[11],b=e[12],p=e[13],F=e[14],P=e[15];return e!==s&&(s[0]=a,s[1]=l,s[2]=u,s[3]=c,s[4]=d,s[5]=f,s[6]=v,s[7]=w,s[8]=A,s[9]=m,s[10]=g,s[11]=M),s[12]=a*h+d*n+A*o+b,s[13]=l*h+f*n+m*o+p,s[14]=u*h+v*n+g*o+F,s[15]=c*h+w*n+M*o+P,s},it:function(e,i,r,s){let h=s??new t(16),n=i[0],o=i[1],a=i[2],l=Math.sqrt(n*n+o*o+a*a);n/=l,o/=l,a/=l;let u=n*n,c=o*o,d=a*a,f=Math.cos(r),v=Math.sin(r),w=1-f,A=u+(1-u)*f,m=n*o*w+a*v,g=n*a*w-o*v,M=n*o*w-a*v,b=c+(1-c)*f,p=o*a*w+n*v,F=n*a*w+o*v,P=o*a*w-n*v,E=d+(1-d)*f,y=e[0],S=e[1],R=e[2],L=e[3],I=e[4],x=e[5],T=e[6],V=e[7],U=e[8],C=e[9],_=e[10],B=e[11];return h[0]=A*y+m*I+g*U,h[1]=A*S+m*x+g*C,h[2]=A*R+m*T+g*_,h[3]=A*L+m*V+g*B,h[4]=M*y+b*I+p*U,h[5]=M*S+b*x+p*C,h[6]=M*R+b*T+p*_,h[7]=M*L+b*V+p*B,h[8]=F*y+P*I+E*U,h[9]=F*S+P*x+E*C,h[10]=F*R+P*T+E*_,h[11]=F*L+P*V+E*B,e!==h&&(h[12]=e[12],h[13]=e[13],h[14]=e[14],h[15]=e[15]),h},$:function(e,i,r){let s=r??new t(16),h=e[0],n=e[1],o=e[2],a=e[3],l=e[4],u=e[5],c=e[6],d=e[7],f=e[8],v=e[9],w=e[10],A=e[11],m=e[12],g=e[13],M=e[14],b=e[15],p=i[0],F=i[1],P=i[2],E=i[3],y=i[4],S=i[5],R=i[6],L=i[7],I=i[8],x=i[9],T=i[10],V=i[11],U=i[12],C=i[13],_=i[14],B=i[15];return s[0]=h*p+l*F+f*P+m*E,s[1]=n*p+u*F+v*P+g*E,s[2]=o*p+c*F+w*P+M*E,s[3]=a*p+d*F+A*P+b*E,s[4]=h*y+l*S+f*R+m*L,s[5]=n*y+u*S+v*R+g*L,s[6]=o*y+c*S+w*R+M*L,s[7]=a*y+d*S+A*R+b*L,s[8]=h*I+l*x+f*T+m*V,s[9]=n*I+u*x+v*T+g*V,s[10]=o*I+c*x+w*T+M*V,s[11]=a*I+d*x+A*T+b*V,s[12]=h*U+l*C+f*_+m*B,s[13]=n*U+u*C+v*_+g*B,s[14]=o*U+c*C+w*_+M*B,s[15]=a*U+d*C+A*_+b*B,s},y:function(s,h,n,o){let a=o??new t(16);return l.g(l.j(s,h,r),r),l.g(l._(n,r,e),e),l.g(l._(r,e,i),i),a[0]=e[0],a[1]=i[0],a[2]=r[0],a[3]=0,a[4]=e[1],a[5]=i[1],a[6]=r[1],a[7]=0,a[8]=e[2],a[9]=i[2],a[10]=r[2],a[11]=0,a[12]=-(e[0]*s[0]+e[1]*s[1]+e[2]*s[2]),a[13]=-(i[0]*s[0]+i[1]*s[1]+i[2]*s[2]),a[14]=-(r[0]*s[0]+r[1]*s[1]+r[2]*s[2]),a[15]=1,a}}}(Float32Array),c=.45*-Math.PI,d=.45*Math.PI;function f(t,e,i){return Math.min(Math.max(t,e),i)}function v(t){let e=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.sqrt(e*e+i*i)}var w=new Float32Array(864),A=new class{constructor(t){this.rt=t,e(this,"n",[]);let i=t-1;for(let e=0;e<t;e++){let s=new r(e,i,(e+1)%t);s.d=Math.PI/4,this.n.push(s),i=e}}et(){if(0===this.n.length)return console.warn("null median"),new Float32Array(3);let t=[1/0,1/0,1/0],e=[-1/0,-1/0,-1/0];for(let i of this.n)for(let r=0;r<4;++r)for(let s=0;s<3;s++)t[s]=Math.min(t[s],i.t[3*r+s]),e[s]=Math.max(e[s],i.t[3*r+s]);return new Float32Array([(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2])}R(){this.n[0].q();for(let t=1;t<this.n.length;++t)this.n[t].X(this.n[t-1])}nt(){for(let t of this.n)console.log(t.f,t.t)}I(t,e){let i=0;for(let r of this.n)for(let h=0;h<s.length;++h)for(let n=0;n<3;++n){let o=s[h][n];t[i++]=r.t[3*o],t[i++]=r.t[3*o+1],t[i++]=r.t[3*o+2];for(let r=0;r<e;r++)t[i++]=0}}}(12);A.R(),A.I(w,3),n(w);var m=document.querySelector("canvas"),g=new class{constructor(){e(this,"s",20),e(this,"a",Math.PI/2),e(this,"h",0),e(this,"D",new Float32Array(3)),e(this,"B",[])}get U(){return this.s}get O(){return this.a}get G(){return this.h}N(t){let e=this.K,i=l.o(0,1,0),r=u.o();u.y(e,this.D,i,r);let s=2*Math.PI/15,h=u.Z(s,t,.1,100),n=u.o();return u.$(h,r,n),n}y(t){this.D.set(t),this.W()}m(t,e,i){let r=!1;if(void 0!==t){let e=f(t,.6,90);e!==this.s&&(this.s=e,r=!0)}if(void 0!==e&&e!==this.a&&(this.a=e,r=!0),void 0!==i){let t=f(i,c,d);t!==this.h&&(this.h=t,r=!0)}return r&&this.W(),r}get K(){let t=Math.cos(this.h);return[this.s*t*Math.cos(this.a),this.s*Math.sin(this.h),this.s*t*Math.sin(this.a)]}H(t){this.B.push(t)}W(){for(let t of this.B)t()}};g.y(new Float32Array([.5,.5,-.25]));new class{constructor(t){this.e=t,e(this,"P",!1),e(this,"V",0),e(this,"E",0),e(this,"i",0),e(this,"c",0),e(this,"F",0),e(this,"u",!1),e(this,"L",0),e(this,"Y",.85),e(this,"p",.007),e(this,"A",.02)}J(t){return t.addEventListener("pointerdown",(e=>{this.P=!0,this.V=e.clientX,this.E=e.clientY,this.i=0,this.c=0,this.F=performance.now(),t.setPointerCapture(e.pointerId)})),t.addEventListener("pointerup",(e=>{this.P=!1,this.u=!1,t.releasePointerCapture(e.pointerId),this.Q()})),t.addEventListener("pointermove",(t=>{if(!this.P||this.u)return;let e=performance.now(),i=e-this.F;if(i<=0)return;let r=window.devicePixelRatio||1,s=(t.clientX-this.V)*r,h=(t.clientY-this.E)*r,n=(t.pointerType,1);this.e.m(void 0,this.e.O+s*this.p*n,this.e.G+h*this.p*n),this.i=s*n/i,this.c=h*n/i,this.F=e,this.V=t.clientX,this.E=t.clientY})),t.addEventListener("wheel",(t=>{t.preventDefault(),this.e.m(this.e.U+.08*t.deltaY)}),{passive:!1}),t.addEventListener("touchstart",(t=>{2===t.touches.length&&(this.u=!0,this.L=v(t.touches))})),t.addEventListener("touchmove",(t=>{if(this.u&&2===t.touches.length){t.preventDefault();let e=v(t.touches),i=e/this.L;this.e.m(this.e.U/i),this.L=e}}),{passive:!1}),t.addEventListener("touchend",(t=>{t.touches.length<2&&(this.u=!1)})),this}Q(){if(Math.abs(this.i)<this.A&&Math.abs(this.c)<this.A)return;let t=()=>{this.e.m(void 0,this.e.O+this.i*this.p*16,this.e.G+this.c*this.p*16),this.i*=this.Y,this.c*=this.Y,(Math.abs(this.i)>=this.A||Math.abs(this.c)>=this.A)&&requestAnimationFrame(t)};requestAnimationFrame(t)}}(g).J(m);var M=new class{constructor(t,i){this.r=t,this.e=i,e(this,"T"),e(this,"b"),e(this,"v"),e(this,"M"),e(this,"w",0),e(this,"x",!1);let r=t.getContext("webgl2",{antialias:!0});if(!r)throw new Error("WebGL2 not available or antialiasing not supported");this.T=r,this.b=function(t,e,i){let r=o(t,t.VERTEX_SHADER,e),s=o(t,t.FRAGMENT_SHADER,i),h=t.createProgram();if(t.attachShader(h,r),t.attachShader(h,s),t.linkProgram(h),!t.getProgramParameter(h,t.LINK_STATUS)){let e=t.getProgramInfoLog(h);throw t.deleteProgram(h),new Error(`Program link error:${e}`)}return t.deleteShader(r),t.deleteShader(s),h}(r,"#version 300 es\nprecision highp float;in vec3 inPosition;in vec4 inColor;in vec2 inUV;uniform mat4 uMVP;out vec4 vColor;out vec2 vUV;void main(){gl_Position=uMVP*vec4(inPosition,1.);vColor=inColor;vUV=inUV;}","#version 300 es\nprecision highp float;in vec4 vColor;in vec2 vUV;out vec4 outColor;void main(){outColor=vColor;}"),this.M=r.getUniformLocation(this.b,"uMVP")||void 0,r.enable(r.DEPTH_TEST),r.depthFunc(r.LESS),this.C(),window.addEventListener("resize",(()=>this.C())),this.e.H((()=>this.l())),this.l()}S(t){let e=t.length/72;if(e%1!=0)throw new Error("Bad array length for tetra data");this.v=function(t,e){let i=t.createVertexArray();t.bindVertexArray(i);let r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,3,t.FLOAT,!1,24,0),t.enableVertexAttribArray(1),t.vertexAttribPointer(1,4,t.UNSIGNED_BYTE,!0,24,12),t.enableVertexAttribArray(2),t.vertexAttribPointer(2,2,t.FLOAT,!1,24,16),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null),i}(this.T,t),this.w=e,this.l()}l(){this.x||(this.x=!0,requestAnimationFrame((()=>this.k())))}k(){this.x=!1;let t=this.T;if(!this.v||0===this.w)return;t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,this.r.width,this.r.height),t.clearColor(.25,.25,.25,1),t.clearDepth(1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.useProgram(this.b);let e=this.r.width/this.r.height,i=this.e.N(e);this.M&&t.uniformMatrix4fv(this.M,!1,new Float32Array(i)),t.bindVertexArray(this.v),t.drawArrays(t.TRIANGLES,0,12*this.w),t.bindVertexArray(null)}C(){let t=window.devicePixelRatio||1;this.r.width=Math.floor(this.r.clientWidth*t),this.r.height=Math.floor(this.r.clientHeight*t),this.l()}}(m,g);M.S(w);var b=performance.now(),p=-1,F=[1e3,4e3,1e3,4e3],P=F.reduce(((t,e)=>t+e)),E=Math.PI;requestAnimationFrame((function t(){let e=(performance.now()-b)%P,i=0;for(let t=0;t<F.length;++t){if(e<=F[t]){i=t;break}e-=F[t]}let r=0;switch(i){case 0:default:break;case 1:r=E*e/F[1];break;case 2:r=E;break;case 3:r=E-E*e/F[3]}if(r!==p){p=r;for(let t=1;t<12;++t)A.n[t].d=r;A.R(),A.I(w,3),n(w),M.S(w),requestAnimationFrame(t)}else requestAnimationFrame(t)}))})()</script></body></html>