<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>shash</title><style>canvas{display:block;width:100vw;height:100%;max-height:100%;overflow:hidden}body,html{overscroll-behavior:none;margin:0;height:100%;overflow:hidden;background-color:#404040}</style><link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 9 9'%3E%3Cpath d='M.5 1H3V3H1V7H3V5H5V7H7V3H5V1H7.5' stroke='%23BADA55'/%3E%3C/svg%3E"></head><body><canvas id="gpuCanvas"></canvas><script>"use strict";(()=>{var t=Object.defineProperty,e=(e,i,r)=>((e,i,r)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r)(e,"symbol"!=typeof i?i+"":i,r);function i(t,e,i){return Math.min(Math.max(t,e),i)}var r=class{constructor(t){this.f=t,e(this,"A",new Float64Array(6)),e(this,"L",new Float64Array(36)),e(this,"R",new Float64Array(36)),e(this,"t",new Float64Array(12))}_(){let t=this.t;t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=1,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=.5,t[10]=.5,t[11]=-.5,this.C(),this.D()}D(){let t=this.L,e=this.t,i=this.t.length,r=0;for(let h=0;h<i-3;h+=3)for(let s=h+3;s<i;s+=3)t[r++]=e[h+0],t[r++]=e[h+1],t[r++]=e[h+2],t[r++]=e[s+0],t[r++]=e[s+1],t[r++]=e[s+2];r=0;let h=this.R;for(let t=0;t<i-9;t+=3)for(let s=t+3;s<i-6;s+=3)for(let n=s+3;n<i;n+=3)h[r++]=e[s+0]-e[t+0],h[r++]=e[s+1]-e[t+1],h[r++]=e[s+2]-e[t+2],h[r++]=e[n+0]-e[t+0],h[r++]=e[n+1]-e[t+1],h[r++]=e[n+2]-e[t+2],h[r++]=e[t+0],h[r++]=e[t+1],h[r++]=e[t+2]}C(){let t=this.A,e=this.t;t[0]=Math.min(e[0],e[3],e[6],e[9]),t[1]=Math.min(e[1],e[4],e[7],e[10]),t[2]=Math.min(e[2],e[5],e[8],e[11]),t[3]=Math.max(e[0],e[3],e[6],e[9]),t[4]=Math.max(e[1],e[4],e[7],e[10]),t[5]=Math.max(e[2],e[5],e[8],e[11])}T(t,e){1&this.f?(this.t[0]=t.t[6],this.t[1]=t.t[7],this.t[2]=t.t[8],this.t[6]=t.t[3],this.t[7]=t.t[4],this.t[8]=t.t[5]):(this.t[0]=t.t[3],this.t[1]=t.t[4],this.t[2]=t.t[5],this.t[6]=t.t[6],this.t[7]=t.t[7],this.t[8]=t.t[8]);let i=this.f,r=3==i||4==i||7==i||8==i||11==i?1:-1;if(this.t[9]=t.t[9],this.t[10]=t.t[10],this.t[11]=t.t[11],s(this.t,r*e,9),this.t[3]=t.t[0],this.t[4]=t.t[1],this.t[5]=t.t[2],s(this.t,r*(e+Math.PI/2),3),1&this.f){let t=this.t[6]-this.t[0],e=this.t[7]-this.t[1],i=this.t[8]-this.t[2];this.t[3]+=t,this.t[4]+=e,this.t[5]+=i}}},h=[[0,2,1],[0,3,2],[0,1,3],[1,2,3]];Math.PI;function s(t,e,i){let r=t[i]-t[0],h=t[i+1]-t[1],s=t[i+2]-t[2],n=t[6]-t[0],o=t[7]-t[1],a=t[8]-t[2],l=Math.sqrt(n*n+o*o+a*a);n/=l,o/=l,a/=l;let u=Math.cos(e),c=Math.sin(e),f=r*n+h*o+s*a,d=r*u+(o*s-a*h)*c+n*f*(1-u),v=h*u+(a*r-n*s)*c+o*f*(1-u),w=s*u+(n*h-o*r)*c+a*f*(1-u);t[i]=d+t[0],t[i+1]=v+t[1],t[i+2]=w+t[2]}var n=[[[57,142,45],[61,129,70],[58,151,124],[37,106,74]],[[224,141,36],[217,172,62],[230,111,86],[221,141,78]],[[170,57,132],[163,97,156],[142,75,109],[155,64,85]],[[69,201,145],[61,194,204],[74,165,212],[94,199,171]],[[175,186,104],[225,144,186],[225,135,128],[211,164,111]],[[180,185,46],[117,147,52],[163,136,44],[133,144,81]],[[116,97,213],[82,121,219],[109,140,206],[110,88,159]],[[205,60,39],[219,98,38],[178,72,69],[161,87,43]],[[81,109,28],[107,109,23],[86,100,43],[134,103,45]],[[87,191,65],[135,184,61],[84,195,104],[114,181,118]],[[228,53,136],[219,55,80],[213,58,110],[205,95,122]],[[180,90,204],[214,74,177],[199,147,224],[234,111,173]]],o=24;function a(t){let e=new Uint32Array(t.buffer),i=0,r=t.length/72;for(let h=0;h<r;++h){let r=n[h%n.length];for(let h=0;h<4;h++){let s=r[h],n=s[0]|s[1]<<8|s[2]<<16|255<<24;for(let r=0;r<3;++r)e[i+3]=n,t[i+4]=42,t[i+5]=42.42,i+=6}}}function l(t,e,i){let r=t.createShader(e);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){let e=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error(`Shader compile error:${e}`)}return r}var u,c=(u=Float32Array,{o:function(t,e,i){let r=new u(3);return void 0!==t&&(r[0]=t,void 0!==e&&(r[1]=e,void 0!==i&&(r[2]=i))),r},J:function(t,e,i){let r=i??new u(3);return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r},G:function(t,e,i){let r=i??new u(3),h=t[2]*e[0]-t[0]*e[2],s=t[0]*e[1]-t[1]*e[0];return r[0]=t[1]*e[2]-t[2]*e[1],r[1]=h,r[2]=s,r},x:function(t,e){let i=e??new u(3),r=t[0],h=t[1],s=t[2],n=Math.sqrt(r*r+h*h+s*s);return n>1e-5?(i[0]=r/n,i[1]=h/n,i[2]=s/n):(i[0]=0,i[1]=0,i[2]=0),i}});var f=function(t){let e=c.o(),i=c.o(),r=c.o();return{Q:function(e,i,r,h,s){let n=s??new t(16),o=Math.tan(.5*Math.PI-.5*e);if(n[0]=o/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,Number.isFinite(h)){let t=1/(r-h);n[10]=h*t,n[14]=h*r*t}else n[10]=-1,n[14]=-r;return n},o:function(e,i,r,h,s,n,o,a,l,u,c,f,d,v,w,m){let A=new t(16);return void 0!==e&&(A[0]=e,void 0!==i&&(A[1]=i,void 0!==r&&(A[2]=r,void 0!==h&&(A[3]=h,void 0!==s&&(A[4]=s,void 0!==n&&(A[5]=n,void 0!==o&&(A[6]=o,void 0!==a&&(A[7]=a,void 0!==l&&(A[8]=l,void 0!==u&&(A[9]=u,void 0!==c&&(A[10]=c,void 0!==f&&(A[11]=f,void 0!==d&&(A[12]=d,void 0!==v&&(A[13]=v,void 0!==w&&(A[14]=w,void 0!==m&&(A[15]=m)))))))))))))))),A},st:function(e){let i=e??new t(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},ct:function(e,i,r){let h=r??new t(16),s=i[0],n=i[1],o=i[2],a=e[0],l=e[1],u=e[2],c=e[3],f=e[4],d=e[5],v=e[6],w=e[7],m=e[8],A=e[9],g=e[10],M=e[11],F=e[12],b=e[13],p=e[14],P=e[15];return e!==h&&(h[0]=a,h[1]=l,h[2]=u,h[3]=c,h[4]=f,h[5]=d,h[6]=v,h[7]=w,h[8]=m,h[9]=A,h[10]=g,h[11]=M),h[12]=a*s+f*n+m*o+F,h[13]=l*s+d*n+A*o+b,h[14]=u*s+v*n+g*o+p,h[15]=c*s+w*n+M*o+P,h},at:function(e,i,r,h){let s=h??new t(16),n=i[0],o=i[1],a=i[2],l=Math.sqrt(n*n+o*o+a*a);n/=l,o/=l,a/=l;let u=n*n,c=o*o,f=a*a,d=Math.cos(r),v=Math.sin(r),w=1-d,m=u+(1-u)*d,A=n*o*w+a*v,g=n*a*w-o*v,M=n*o*w-a*v,F=c+(1-c)*d,b=o*a*w+n*v,p=n*a*w+o*v,P=o*a*w-n*v,y=f+(1-f)*d,E=e[0],S=e[1],R=e[2],x=e[3],I=e[4],L=e[5],V=e[6],T=e[7],U=e[8],C=e[9],_=e[10],B=e[11];return s[0]=m*E+A*I+g*U,s[1]=m*S+A*L+g*C,s[2]=m*R+A*V+g*_,s[3]=m*x+A*T+g*B,s[4]=M*E+F*I+b*U,s[5]=M*S+F*L+b*C,s[6]=M*R+F*V+b*_,s[7]=M*x+F*T+b*B,s[8]=p*E+P*I+y*U,s[9]=p*S+P*L+y*C,s[10]=p*R+P*V+y*_,s[11]=p*x+P*T+y*B,e!==s&&(s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s},z:function(e,i,r){let h=r??new t(16),s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],u=e[5],c=e[6],f=e[7],d=e[8],v=e[9],w=e[10],m=e[11],A=e[12],g=e[13],M=e[14],F=e[15],b=i[0],p=i[1],P=i[2],y=i[3],E=i[4],S=i[5],R=i[6],x=i[7],I=i[8],L=i[9],V=i[10],T=i[11],U=i[12],C=i[13],_=i[14],B=i[15];return h[0]=s*b+l*p+d*P+A*y,h[1]=n*b+u*p+v*P+g*y,h[2]=o*b+c*p+w*P+M*y,h[3]=a*b+f*p+m*P+F*y,h[4]=s*E+l*S+d*R+A*x,h[5]=n*E+u*S+v*R+g*x,h[6]=o*E+c*S+w*R+M*x,h[7]=a*E+f*S+m*R+F*x,h[8]=s*I+l*L+d*V+A*T,h[9]=n*I+u*L+v*V+g*T,h[10]=o*I+c*L+w*V+M*T,h[11]=a*I+f*L+m*V+F*T,h[12]=s*U+l*C+d*_+A*B,h[13]=n*U+u*C+v*_+g*B,h[14]=o*U+c*C+w*_+M*B,h[15]=a*U+f*C+m*_+F*B,h},g:function(h,s,n,o){let a=o??new t(16);return c.x(c.J(h,s,r),r),c.x(c.G(n,r,e),e),c.x(c.G(r,e,i),i),a[0]=e[0],a[1]=i[0],a[2]=r[0],a[3]=0,a[4]=e[1],a[5]=i[1],a[6]=r[1],a[7]=0,a[8]=e[2],a[9]=i[2],a[10]=r[2],a[11]=0,a[12]=-(e[0]*h[0]+e[1]*h[1]+e[2]*h[2]),a[13]=-(i[0]*h[0]+i[1]*h[1]+i[2]*h[2]),a[14]=-(r[0]*h[0]+r[1]*h[1]+r[2]*h[2]),a[15]=1,a}}}(Float32Array),d=.45*-Math.PI,v=.45*Math.PI;function w(t){let e=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.sqrt(e*e+i*i)}var m=12,A=new Float32Array(864),g=new class{constructor(t){this.it=t,e(this,"n",[]);for(let e=0;e<t;e++){let t=new r(e);this.n.push(t)}this.n[0]._()}rt(){if(0===this.n.length)return console.warn("null median"),new Float32Array(3);let t=[1/0,1/0,1/0],e=[-1/0,-1/0,-1/0];for(let i of this.n)for(let r=0;r<4;++r)for(let h=0;h<3;h++)t[h]=Math.min(t[h],i.t[3*r+h]),e[h]=Math.max(e[h],i.t[3*r+h]);return new Float32Array([(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2])}k(t){for(let e=1;e<this.n.length;++e)this.n[e].T(this.n[e-1],t)}ot(){for(let t of this.n)console.log(t.f,t.t)}S(t,e){let i=0;for(let r of this.n)for(let s=0;s<h.length;++s)for(let n=0;n<3;++n){let o=h[s][n];t[i++]=r.t[3*o],t[i++]=r.t[3*o+1],t[i++]=r.t[3*o+2];for(let r=0;r<e;r++)t[i++]=0}}}(m);g.k(0),g.S(A,3),a(A);var M=document.querySelector("canvas"),F=new class{constructor(){e(this,"i",20),e(this,"a",Math.PI/2),e(this,"h",0),e(this,"W",new Float32Array(3)),e(this,"N",[])}get q(){return this.i}get H(){return this.a}get X(){return this.h}Z(t){let e=this.tt,i=c.o(0,1,0),r=f.o();f.g(e,this.W,i,r);let h=2*Math.PI/15,s=f.Q(h,t,.1,100),n=f.o();return f.z(s,r,n),n}g(t){this.W.set(t),this.Y()}d(t,e,r){let h=!1;if(void 0!==t){let e=i(t,.6,90);e!==this.i&&(this.i=e,h=!0)}if(void 0!==e&&e!==this.a&&(this.a=e,h=!0),void 0!==r){let t=i(r,d,v);t!==this.h&&(this.h=t,h=!0)}return h&&this.Y(),h}get tt(){let t=Math.cos(this.h);return[this.i*t*Math.cos(this.a),this.i*Math.sin(this.h),this.i*t*Math.sin(this.a)]}$(t){this.N.push(t)}Y(){for(let t of this.N)t()}};F.g(new Float32Array([.5,.5,-.25]));new class{constructor(t){this.e=t,e(this,"F",!1),e(this,"E",0),e(this,"P",0),e(this,"s",0),e(this,"c",0),e(this,"V",0),e(this,"u",!1),e(this,"I",0),e(this,"j",.85),e(this,"m",.007),e(this,"p",.02)}et(t){return t.addEventListener("pointerdown",(e=>{this.F=!0,this.E=e.clientX,this.P=e.clientY,this.s=0,this.c=0,this.V=performance.now(),t.setPointerCapture(e.pointerId)})),t.addEventListener("pointerup",(e=>{this.F=!1,this.u=!1,t.releasePointerCapture(e.pointerId),this.nt()})),t.addEventListener("pointermove",(t=>{if(!this.F||this.u)return;let e=performance.now(),i=e-this.V;if(i<=0)return;let r=window.devicePixelRatio||1,h=(t.clientX-this.E)*r,s=(t.clientY-this.P)*r,n=(t.pointerType,1);this.e.d(void 0,this.e.H+h*this.m*n,this.e.X+s*this.m*n),this.s=h*n/i,this.c=s*n/i,this.V=e,this.E=t.clientX,this.P=t.clientY})),t.addEventListener("wheel",(t=>{t.preventDefault(),this.e.d(this.e.q+.08*t.deltaY)}),{passive:!1}),t.addEventListener("touchstart",(t=>{2===t.touches.length&&(this.u=!0,this.I=w(t.touches))})),t.addEventListener("touchmove",(t=>{if(this.u&&2===t.touches.length){t.preventDefault();let e=w(t.touches),i=e/this.I;this.e.d(this.e.q/i),this.I=e}}),{passive:!1}),t.addEventListener("touchend",(t=>{t.touches.length<2&&(this.u=!1)})),this}nt(){if(Math.abs(this.s)<this.p&&Math.abs(this.c)<this.p)return;let t=()=>{this.e.d(void 0,this.e.H+this.s*this.m*16,this.e.X+this.c*this.m*16),this.s*=this.j,this.c*=this.j,(Math.abs(this.s)>=this.p||Math.abs(this.c)>=this.p)&&requestAnimationFrame(t)};requestAnimationFrame(t)}}(F).et(M);var b=new class{constructor(t,i){this.r=t,this.e=i,e(this,"b"),e(this,"M"),e(this,"v"),e(this,"B"),e(this,"y",0),e(this,"w",!1);let r=t.getContext("webgl2",{antialias:!0});if(!r)throw new Error("WebGL2 not available or antialiasing not supported");this.b=r,this.M=function(t,e,i){let r=l(t,t.VERTEX_SHADER,e),h=l(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,h),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS)){let e=t.getProgramInfoLog(s);throw t.deleteProgram(s),new Error(`Program link error:${e}`)}return t.deleteShader(r),t.deleteShader(h),s}(r,"#version 300 es\nprecision highp float;in vec3 inPosition;in vec4 inColor;in vec2 inUV;uniform mat4 uMVP;out vec4 vColor;out vec2 vUV;void main(){gl_Position=uMVP*vec4(inPosition,1.);vColor=inColor;vUV=inUV;}","#version 300 es\nprecision highp float;in vec4 vColor;in vec2 vUV;out vec4 outColor;void main(){outColor=vColor;}"),this.B=r.getUniformLocation(this.M,"uMVP"),r.enable(r.DEPTH_TEST),r.depthFunc(r.LESS),this.U(),window.addEventListener("resize",(()=>this.U())),this.e.$((()=>this.l())),this.l()}O(t){let e=t.length/72;if(e%1!=0)throw new Error("Bad array length for tetra data");this.v=function(t,e){let i=t.createVertexArray();t.bindVertexArray(i);let r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW);let h=0;t.enableVertexAttribArray(h),t.vertexAttribPointer(h,3,t.FLOAT,!1,o,0);let s=1;t.enableVertexAttribArray(s),t.vertexAttribPointer(s,4,t.UNSIGNED_BYTE,!0,o,12);let n=2;return t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,o,16),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null),i}(this.b,t),this.y=e,this.l()}l(){this.w||(this.w=!0,requestAnimationFrame((()=>this.K())))}K(){this.w=!1;let t=this.b;if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,this.r.width,this.r.height),t.clearColor(.25,.25,.25,1),t.clearDepth(1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),!this.v||0===this.y)return;t.useProgram(this.M);let e=this.r.width/this.r.height,i=this.e.Z(e);t.uniformMatrix4fv(this.B,!1,new Float32Array(i)),t.bindVertexArray(this.v),t.drawArrays(t.TRIANGLES,0,12*this.y),t.bindVertexArray(null)}U(){let t=window.devicePixelRatio||1;this.r.width=Math.floor(this.r.clientWidth*t),this.r.height=Math.floor(this.r.clientHeight*t),this.l()}}(M,F);b.O(A);var p=performance.now(),P=new Float32Array(11),y=new Float32Array(22);for(let t=0;t<11;++t)y[11+t]=Math.PI;var E,S=y,R=2e3;requestAnimationFrame((function t(){let e=performance.now(),r=i((e-p)/R,0,1);if(r>=1&&E){let t=11,i=0;for(;i<Math.min(y.length,E.length)/t-2;++i){let e=!0;for(let r=0;r<11;++r)if(y[i*t+r]!==E[i*t+r]){e=!1;break}if(!e)break}y=E,S=E.subarray(i*t),R=2e3*(y.length/t-i)/(y.length/t),console.log("curAnimateDurationMs",R),E=void 0,p=e,r=0}!function(t,e,r){let h=t.length/11,s=Math.floor(e*h);s>=h-1&&(s=h-2);let n=i(e*h-s,0,1),o=11*s,a=o+11;for(let e=0;e<11;++e)r[e]=t[o+e]+n*(t[a+e]-t[o+e])}(S,r,P);for(let t=1;t<g.n.length;++t)g.n[t].T(g.n[t-1],P[t-1]);g.S(A,3),a(A),b.O(A),requestAnimationFrame(t)})),new Worker("worker.js").onmessage=t=>{let e=t.data,i=new Float32Array(e);E=i,console.log("Received array from worker:",i)}})()</script></body></html>