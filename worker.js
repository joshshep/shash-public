"use strict";(()=>{var U=Object.defineProperty;var V=(o,t,n)=>t in o?U(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var A=(o,t,n)=>V(o,typeof t!="symbol"?t+"":t,n);function Y(o,t,n){return Math.min(Math.max(o,t),n)}var q=class{constructor(t){this.o=t;A(this,"r",new Float64Array(6));A(this,"e",new Float64Array(36));A(this,"i",new Float64Array(36));A(this,"t",new Float64Array(12))}s(){let t=this.t;t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=1,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=.5,t[10]=.5,t[11]=-.5,this.c(),this.h()}h(){let t=this.e,n=this.t,e=this.t.length,r=0;for(let i=0;i<e-3;i+=3)for(let s=i+3;s<e;s+=3)t[r++]=n[i+0],t[r++]=n[i+1],t[r++]=n[i+2],t[r++]=n[s+0],t[r++]=n[s+1],t[r++]=n[s+2];r=0;let h=this.i;for(let i=0;i<e-9;i+=3)for(let s=i+3;s<e-6;s+=3)for(let c=s+3;c<e;c+=3)h[r++]=n[s+0]-n[i+0],h[r++]=n[s+1]-n[i+1],h[r++]=n[s+2]-n[i+2],h[r++]=n[c+0]-n[i+0],h[r++]=n[c+1]-n[i+1],h[r++]=n[c+2]-n[i+2],h[r++]=n[i+0],h[r++]=n[i+1],h[r++]=n[i+2]}c(){let t=this.r,n=this.t;t[0]=Math.min(n[0],n[3],n[6],n[9]),t[1]=Math.min(n[1],n[4],n[7],n[10]),t[2]=Math.min(n[2],n[5],n[8],n[11]),t[3]=Math.max(n[0],n[3],n[6],n[9]),t[4]=Math.max(n[1],n[4],n[7],n[10]),t[5]=Math.max(n[2],n[5],n[8],n[11])}l(t,n){this.o&1?(this.t[0]=t.t[6],this.t[1]=t.t[7],this.t[2]=t.t[8],this.t[6]=t.t[3],this.t[7]=t.t[4],this.t[8]=t.t[5]):(this.t[0]=t.t[3],this.t[1]=t.t[4],this.t[2]=t.t[5],this.t[6]=t.t[6],this.t[7]=t.t[7],this.t[8]=t.t[8]);let e=this.o,r=e==3||e==4||e==7||e==8||e==11?1:-1;if(this.t[9]=t.t[9],this.t[10]=t.t[10],this.t[11]=t.t[11],J(this.t,r*n,9),this.t[3]=t.t[0],this.t[4]=t.t[1],this.t[5]=t.t[2],J(this.t,r*(n+Math.PI/2),3),this.o&1){let h=this.t[6]-this.t[0],i=this.t[7]-this.t[1],s=this.t[8]-this.t[2];this.t[3]+=h,this.t[4]+=i,this.t[5]+=s}}};var k=0,m=Math.PI;function z(o){let t=0;for(let n=0;n<o.length;++n)o[n]==k?t|=1<<n*2:o[n]==m&&(t|=2<<n*2);return t}function tt(o,t){for(let n=0;n<o.length;++n)t[n+1].l(t[n],o[n])}function Q(o){console.log("startDfs");let t=[];for(let r=0;r<o;r++){let h=new q(r);t.push(h)}t[0].s();let n=[new Array(t.length-1).fill(0)];S(t,0,n,new Map),console.log("finishDfs")}function Z(o){let t=o.length*o[0].length,n=new Float32Array(t);for(let e=0;e<o.length;++e)for(let r=0;r<o[e].length;++r)n[e*o[e].length+r]=o[e][r];self.postMessage(n,[n.buffer])}var I=Math.PI*.1,D=0,M=1e3,$=D+M,nt=500,j;function S(o,t,n,e){if(t>=8192)return;let r=n[t];tt(r,o);let h=ot(o);if(D++>$){let c=performance.now();if(j){let u=c-j,l=Y(nt/u,.75,1.25);M=M*l,$=D+M,console.log("currentInterruptInterval",M)}j=c,Z(n)}if(h)return;let i=z(r);if(e.has(i)||(console.log(`new unique #${e.size} at ${t}:`,r),Z(n),e.set(i,r)),t+1>=n.length)for(console.log("new max depth",t);n.length<=t+1;)n.push(new Array(...r));let s=n[t+1];for(let c=0;c<r.length;++c)s[c]=r[c];for(let c=0;c<r.length-3;++c)if(r[c]!==m){s[c]=Math.min(m,r[c]+I);for(let u=c+1;u<r.length-2;++u)if(r[u]!==m){s[u]=Math.min(m,r[u]+I);for(let l=u+1;l<r.length-1;++l)if(r[l]!==m){s[l]=Math.min(m,r[l]+I);for(let a=l+1;a<r.length;++a)r[a]!==m&&(s[a]=Math.min(m,r[a]+I),S(o,t+1,n,e),s[a]=r[a]);s[l]=r[l]}s[u]=r[u]}s[c]=r[c]}}function ot(o){for(let t=1;t<o.length;++t){let n=o[t];n.c(),n.h()}for(let t=0;t<o.length-2;++t){let n=o[t];for(let e=t+2;e<o.length;++e){let r=o[e];if(rt(n.r,r.r)&&et(n.e,r.i))return!0}}return!1}function rt(o,t){return o[0]<=t[3]&&o[3]>=t[0]&&o[1]<=t[4]&&o[4]>=t[1]&&o[2]<=t[5]&&o[5]>=t[2]}var d=1e-6;function et(o,t){for(let n=0;n<t.length;n+=9){let e=t[n],r=t[n+1],h=t[n+2],i=t[n+3],s=t[n+4],c=t[n+5],u=t[n+6],l=t[n+7],a=t[n+8];for(let f=0;f<o.length;f+=6){let b=o[f],y=o[f+1],p=o[f+2],w=o[f+3],v=o[f+4],F=o[f+5],T=w-b,_=v-y,E=F-p,R=_*c-E*s,W=E*i-T*c,G=T*s-_*i,H=e*R+r*W+h*G;if(Math.abs(H)<d)continue;let g=1/H,P=b-u,x=y-l,L=p-a,N=g*(P*R+x*W+L*G);if(N<-d||N>1+d)continue;let O=x*h-L*r,X=L*e-P*h,B=P*r-x*e,C=g*(T*O+_*X+E*B);if(C<-d||N+C>1+d)continue;let K=g*(i*O+s*X+c*B);if(K>=d&&K<=1-d)return!0}}return!1}function J(o,t,n){let e=o[n]-o[0],r=o[n+1]-o[1],h=o[n+2]-o[2],i=o[6]-o[0],s=o[7]-o[1],c=o[8]-o[2],u=Math.sqrt(i*i+s*s+c*c);i/=u,s/=u,c/=u;let l=Math.cos(t),a=Math.sin(t),f=e*i+r*s+h*c,b=s*h-c*r,y=c*e-i*h,p=i*r-s*e,w=e*l+b*a+i*f*(1-l),v=r*l+y*a+s*f*(1-l),F=h*l+p*a+c*f*(1-l);o[n]=w+o[0],o[n+1]=v+o[1],o[n+2]=F+o[2]}console.log("WORKER is running");var it=12;Q(it);})();
